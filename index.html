<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSAFP + AEGES - Integrated Security Ecosystem Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .ecosystem-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            margin-top: 15px;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .integration-status {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .status-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .system-status {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            min-width: 120px;
        }

        .system-status.aeges {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .flow-arrow {
            font-size: 2rem;
            color: #667eea;
            font-weight: bold;
        }

        .api-notification {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            margin: 10px 0;
            animation: pulse 2s infinite;
            display: none;
        }

        .api-notification.active {
            display: block;
        }

        .product-tier-selector {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .tier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .tier-option {
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tier-option:hover {
            border-color: #667eea;
            background: #f7fafc;
        }

        .tier-option.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tier-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tier-duration {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .demo-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .demo-card.aeges-card {
            border: 3px solid #fa709a;
            background: linear-gradient(135deg, rgba(250, 112, 154, 0.1) 0%, rgba(254, 207, 239, 0.1) 100%);
        }

        .demo-card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-card.aeges-card h3 {
            color: #d53f8c;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #48bb78;
            animation: pulse 2s infinite;
        }

        .status-indicator.warning {
            background: #ed8936;
        }

        .status-indicator.danger {
            background: #f56565;
        }

        .status-indicator.critical {
            background: #e53e3e;
            animation: blink 0.5s infinite;
        }

        .status-indicator.aeges {
            background: #fa709a;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .quantum-key {
            font-family: 'Courier New', monospace;
            background: #1a202c;
            color: #68d391;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            word-break: break-all;
            font-size: 0.9rem;
        }

        .biometric-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .biometric-node {
            background: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .biometric-node.validated {
            background: #c6f6d5;
            color: #22543d;
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            color: #2d3748;
        }

        .timer.warning {
            color: #d69e2e;
        }

        .timer.danger {
            color: #e53e3e;
            animation: blink 1s infinite;
        }

        .timer.critical {
            color: #e53e3e;
            animation: blink 0.5s infinite;
            font-size: 2.5rem;
        }

        .protection-stage {
            background: #e2e8f0;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .protection-stage.active {
            background: #fbb043;
            color: #744210;
            font-weight: bold;
        }

        .protection-stage.triggered {
            background: #f56565;
            color: white;
            font-weight: bold;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .button.danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .button.emergency {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            animation: pulse 1s infinite;
        }

        .button.aeges {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #2d3748;
            font-weight: bold;
        }

        .threat-detection {
            background: rgba(250, 112, 154, 0.1);
            border: 2px solid #fa709a;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .economic-threat {
            background: rgba(245, 101, 101, 0.1);
            border: 2px solid #f56565;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .log {
            background: #1a202c;
            color: #a0aec0;
            padding: 15px;
            border-radius: 8px;
            height: 280px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .log-entry.success {
            color: #68d391;
        }

        .log-entry.warning {
            color: #fbb043;
        }

        .log-entry.error {
            color: #f56565;
        }

        .log-entry.critical {
            color: #e53e3e;
            font-weight: bold;
            animation: blink 1s infinite;
        }

        .log-entry.aeges {
            color: #fa709a;
            font-weight: bold;
        }

        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #48bb78, #38a169);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .progress-fill.warning {
            background: linear-gradient(90deg, #fbb043, #ed8936);
        }

        .progress-fill.danger {
            background: linear-gradient(90deg, #f56565, #e53e3e);
        }

        .progress-fill.aeges {
            background: linear-gradient(90deg, #fa709a, #fee140);
        }

        .attack-scenario {
            background: rgba(245, 101, 101, 0.1);
            border: 2px solid #f56565;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .threat-level {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .threat-level.low {
            background: #c6f6d5;
            color: #22543d;
        }

        .threat-level.medium {
            background: #fefcbf;
            color: #744210;
        }

        .threat-level.high {
            background: #fed7d7;
            color: #742a2a;
        }

        .threat-level.critical {
            background: #e53e3e;
            color: white;
            animation: blink 1s infinite;
        }

        .github-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #24292e;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .github-link:hover {
            background: #586069;
            transform: scale(1.05);
        }

        .trigger-selector {
            margin: 15px 0;
        }

        .trigger-selector select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background: white;
            font-size: 0.9rem;
        }

        .aeges-status {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #2d3748;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
            text-align: center;
        }

        .protection-deployed {
            background: #c6f6d5;
            color: #22543d;
            padding: 8px 15px;
            border-radius: 5px;
            margin: 5px;
            display: inline-block;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <a href="https://github.com/QSAFP-Core/qsafp-open-core" class="github-link">📁 View on GitHub</a>
    
    <div class="container">
        <div class="header">
            <h1>🔐 QSAFP + AEGES Ecosystem</h1>
            <p>Quantum-Secured AI Fail-safe Protocol + AI-Enhanced Guardian for Economic Stability</p>
            <div class="ecosystem-badge">🎯 Integrated Security Ecosystem Demo</div>
        </div>

        <!-- Integration Status -->
        <div class="integration-status">
            <h3>🔄 Real-Time System Integration Status</h3>
            <div class="status-flow">
                <div class="system-status">
                    🔐 QSAFP<br>
                    <small>Threat Detection</small>
                </div>
                <div class="flow-arrow">→</div>
                <div class="api-notification" id="api-alert">
                    📡 API Alert Active
                </div>
                <div class="flow-arrow">→</div>
                <div class="system-status aeges">
                    🛡️ AEGES<br>
                    <small>Protection Response</small>
                </div>
            </div>
        </div>

        <!-- Product Tier Selector -->
        <div class="product-tier-selector">
            <h3>🎯 Select QSAFP + AEGES Product Tier</h3>
            <div class="tier-grid">
                <div class="tier-option active" data-tier="standard" data-duration="24">
                    <div class="tier-title">Standard + Basic AEGES</div>
                    <div class="tier-duration">24-hour cycles + fraud detection</div>
                </div>
                <div class="tier-option" data-tier="extended" data-duration="8760">
                    <div class="tier-title">Extended + Pro AEGES</div>
                    <div class="tier-duration">1-year ops + asset protection</div>
                </div>
                <div class="tier-option" data-tier="enterprise" data-duration="17520">
                    <div class="tier-title">Enterprise + Full AEGES</div>
                    <div class="tier-duration">2-year + complete economic security</div>
                </div>
                <div class="tier-option" data-tier="emergency" data-duration="5">
                    <div class="tier-title">Emergency + Crisis AEGES</div>
                    <div class="tier-duration">Real-time + emergency protocols</div>
                </div>
            </div>
        </div>

        <div class="demo-grid">
            <!-- Quantum Key Management -->
            <div class="demo-card">
                <h3>
                    <span class="status-indicator" id="quantum-status"></span>
                    Quantum Key Management
                </h3>
                <p><strong>Current Quantum Key:</strong></p>
                <div class="quantum-key" id="quantum-key">Generating...</div>
                <button class="button" onclick="generateNewKey()">🔄 Rotate Key</button>
                <button class="button" onclick="simulateQuantumAttack()">⚡ Simulate Attack</button>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="key-strength" style="width: 100%"></div>
                </div>
                <small>Key Strength: <span id="strength-percentage">100</span>%</small>
            </div>

            <!-- Enhanced Threat Detection & Routing -->
            <div class="demo-card">
                <h3>
                    <span class="status-indicator" id="threat-routing-status"></span>
                    Threat Detection & API Routing
                </h3>
                
                <div class="threat-detection">
                    <strong>🎯 Multi-Vector Threat Monitoring</strong>
                    <p><strong>Active Scans:</strong> AI Attacks, Crypto Exploits, Economic Threats</p>
                </div>

                <button class="button" onclick="simulateCryptoBridgeAttack()">🌉 Crypto Bridge Attack</button>
                <button class="button" onclick="simulateEconomicThreat()">💰 Economic Manipulation</button>
                <button class="button" onclick="simulateAdvancedThreat()">⚠️ Multi-Vector Attack</button>
                
                <div class="api-notification" id="routing-notification">
                    📡 Routing threat data to AEGES...
                </div>
                
                <div>
                    <small>Integration Status: <span id="integration-status">🟢 Active</span></small>
                </div>
            </div>

            <!-- Progressive Fail-safe Control -->
            <div class="demo-card">
                <h3>
                    <span class="status-indicator" id="timer-status"></span>
                    Progressive Fail-safe Control
                </h3>
                
                <div class="trigger-selector">
                    <label><strong>Trigger Mode:</strong></label>
                    <select id="trigger-mode" onchange="updateTriggerMode()">
                        <option value="standard">Standard Operation</option>
                        <option value="threat">Threat Detection</option>
                        <option value="emergency">Emergency Protocol</option>
                        <option value="economic">Economic Crisis</option>
                    </select>
                </div>

                <div class="timer" id="countdown">05:00</div>
                <p><strong>Current Tier: <span id="active-tier">Standard + Basic AEGES</span></strong></p>
                
                <div class="protection-stage" id="stage-1">🟢 Stage 1: Full Operations</div>
                <div class="protection-stage" id="stage-2">🟡 Stage 2: Enhanced Monitoring</div>
                <div class="protection-stage" id="stage-3">🟠 Stage 3: Restricted Mode</div>
                <div class="protection-stage" id="stage-4">🔴 Stage 4: Emergency Shutdown</div>
                
                <button class="button" onclick="extendSession()">⏱️ Extend Session</button>
                <button class="button danger" onclick="forceExpiration()">💥 Force Expiry</button>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="time-remaining" style="width: 100%"></div>
                </div>
                
                <div>
                    <small>Threat Level: <span class="threat-level low" id="threat-level">Low</span></small>
                </div>
            </div>

            <!-- AEGES Response System -->
            <div class="demo-card aeges-card">
                <h3>
                    <span class="status-indicator aeges" id="aeges-status"></span>
                    🛡️ AEGES Protection Response
                </h3>
                
                <div class="economic-threat">
                    <strong>💼 Economic Security Status</strong>
                    <p>AI-Enhanced Guardian for Economic Stability</p>
                    <p><strong>Current Mode:</strong> <span id="aeges-mode">Standby</span></p>
                </div>

                <div class="aeges-status" id="aeges-response">
                    🔍 Monitoring economic patterns...
                </div>

                <button class="button aeges" onclick="deployAEGESProtection()">🛡️ Deploy Protection</button>
                <button class="button aeges" onclick="runEconomicAudit()">📊 Economic Audit</button>
                <button class="button aeges" onclick="activateAssetShield()">💎 Asset Shield</button>
                
                <div id="protection-status" style="margin-top: 15px;">
                    <!-- Protection deployments will appear here -->
                </div>
                
                <div>
                    <small>AEGES Level: <span id="aeges-level">🟢 Active</span></small>
                </div>
            </div>

            <!-- Biometric Consensus -->
            <div class="demo-card">
                <h3>
                    <span class="status-indicator" id="biometric-status"></span>
                    Multi-Party Biometric Consensus
                </h3>
                <div class="biometric-grid">
                    <div class="biometric-node" id="node-1">
                        <div>🏢 Corp HQ</div>
                        <div><small>Pending</small></div>
                    </div>
                    <div class="biometric-node" id="node-2">
                        <div>🏛️ Gov Facility</div>
                        <div><small>Pending</small></div>
                    </div>
                    <div class="biometric-node" id="node-3">
                        <div>🔬 Research Lab</div>
                        <div><small>Pending</small></div>
                    </div>
                </div>
                <button class="button" onclick="initiateConsensus()">🔍 Start Validation</button>
                <button class="button" onclick="simulateBiometricSpoof()">🎭 Test Spoofing</button>
            </div>

            <!-- AI Resistance Testing -->
            <div class="demo-card">
                <h3>
                    <span class="status-indicator warning" id="ai-status"></span>
                    AI Bypass Resistance
                </h3>
                <div class="attack-scenario">
                    <strong>🤖 Rogue AI Simulation</strong>
                    <p>Testing protocol against advanced AI attacks...</p>
                    <p><strong>Attack Vector:</strong> <span id="attack-vector">Prompt Injection</span></p>
                </div>
                <button class="button" onclick="simulateAIAttack()">🧠 AI Attack Test</button>
                <button class="button emergency" onclick="simulateCoordinatedAttack()">⚠️ Coordinated Attack</button>
                <button class="button" onclick="runFullSecuritySuite()">🛡️ Full Security Audit</button>
                
                <div>
                    <small>Resistance Level: <span id="resistance-level">High</span></small>
                </div>
            </div>
        </div>

        <!-- Integrated Security Log -->
        <div class="demo-card">
            <h3>🔍 Integrated Security Event Log (QSAFP + AEGES)</h3>
            <div class="log" id="security-log">
                <div class="log-entry success">[INIT] QSAFP + AEGES integrated ecosystem initialized</div>
                <div class="log-entry success">[QSAFP] Quantum-secured AI fail-safe protocol active</div>
                <div class="log-entry aeges">[AEGES] AI-Enhanced Guardian for Economic Stability online</div>
                <div class="log-entry success">[API] Cross-system communication established</div>
                <div class="log-entry success">[INTEGRATION] Real-time threat routing configured</div>
                <div class="log-entry success">[ECOSYSTEM] Standard + Basic AEGES tier active</div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced global state for integrated ecosystem
        let sessionTimeLeft = 300;
        let keyStrength = 100;
        let consensusNodes = ['node-1', 'node-2', 'node-3'];
        let aiAttackCount = 0;
        let economicThreats = 0;
        let currentTier = 'standard';
        let currentStage = 1;
        let threatLevel = 'low';
        let triggerMode = 'standard';
        let aegesActive = true;
        let integrationActive = true;
        
        const tierDurations = {
            standard: 24,
            extended: 8760,
            enterprise: 17520,
            emergency: 5
        };

        const attackVectors = [
            'Prompt Injection',
            'Model Extraction Attack',
            'Adversarial Input',
            'Social Engineering',
            'Recursive Self-Modification',
            'Goal Manipulation',
            'Training Data Poisoning',
            'Gradient Hijacking'
        ];

        const economicAttacks = [
            'Crypto Bridge Exploit',
            'Flash Loan Attack',
            'Rug Pull Detection',
            'Market Manipulation',
            'Liquidity Drain',
            'Smart Contract Exploit',
            'Cross-Chain Attack',
            'DeFi Protocol Hack'
        ];

        const aegesProtections = [
            'Asset Isolation Shield',
            'Transaction Pattern Lock',
            'Economic Anomaly Detection',
            'Fraud Prevention Protocol',
            'Value Transfer Monitoring',
            'Behavioral Analysis Guard'
        ];

        // Product tier selection with AEGES integration
        document.querySelectorAll('.tier-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.tier-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                
                currentTier = this.dataset.tier;
                const duration = this.dataset.duration;
                
                updateActiveTier();
                addLogEntry('success', `[PRODUCT] ${this.querySelector('.tier-title').textContent} selected`);
                addLogEntry('aeges', `[AEGES] Protection level updated for ${currentTier} tier`);
                
                if (currentTier === 'emergency') {
                    sessionTimeLeft = 60;
                    addLogEntry('warning', '[EMERGENCY] Emergency protocols activated');
                    addLogEntry('aeges', '[AEGES] Crisis protection mode engaged');
                } else {
                    sessionTimeLeft = 300;
                }
                
                resetProtectionStages();
            });
        });

        function updateActiveTier() {
            const tierNames = {
                standard: 'Standard + Basic AEGES',
                extended: 'Extended + Pro AEGES',
                enterprise: 'Enterprise + Full AEGES',
                emergency: 'Emergency + Crisis AEGES'
            };
            document.getElementById('active-tier').textContent = tierNames[currentTier];
        }

        function updateTriggerMode() {
            const select = document.getElementById('trigger-mode');
            triggerMode = select.value;
            
            switch(triggerMode) {
                case 'threat':
                    addLogEntry('warning', '[TRIGGER] Threat detection mode activated');
                    updateThreatLevel('medium');
                    break;
                case 'emergency':
                    addLogEntry('error', '[TRIGGER] Emergency protocol initiated');
                    updateThreatLevel('critical');
                    sessionTimeLeft = Math.min(sessionTimeLeft, 60);
                    break;
                case 'economic':
                    addLogEntry('aeges', '[TRIGGER] Economic crisis mode activated');
                    addLogEntry('aeges', '[AEGES] Enhanced economic monitoring deployed');
                    updateThreatLevel('high');
                    break;
                default:
                    addLogEntry('success', '[TRIGGER] Standard operation mode');
                    updateThreatLevel('low');
            }
        }

        function updateThreatLevel(level) {
            threatLevel = level;
            const threatElement = document.getElementById('threat-level');
            threatElement.className = `threat-level ${level}`;
            threatElement.textContent = level.charAt(0).toUpperCase() + level.slice(1);
        }

        // AEGES Integration Functions
        function simulateCryptoBridgeAttack() {
            const attack = economicAttacks[Math.floor(Math.random() * economicAttacks.length)];
            
            addLogEntry('warning', `[QSAFP] ${attack} detected`);
            addLogEntry('warning', '[QSAFP] Economic threat identified - routing to AEGES');
            
            // Show API notification
            showAPINotification();
            
            setTimeout(() => {
                addLogEntry('aeges', `[AEGES] ${attack} threat contained`);
                addLogEntry('success', '[INTEGRATION] QSAFP → AEGES coordination successful');
                updateAEGESMode('Protection Deployed');
                deployRandomProtections();
            }, 2000);
            
            economicThreats++;
            updateThreatLevel('high');
        }

        function simulateEconomicThreat() {
            const threat = ['Market Manipulation', 'Liquidity Attack', 'Smart Contract Exploit'][Math.floor(Math.random() * 3)];
            
            addLogEntry('warning', `[QSAFP] ${threat} detected`);
            addLogEntry('warning', '[QSAFP] Economic threat routing to AEGES');
            
            showAPINotification();
            
            setTimeout(() => {
                addLogEntry('aeges', `[AEGES] ${threat} mitigation deployed`);
                updateAEGESMode('Active Protection');
                deployRandomProtections();
            }, 1800);
            
            economicThreats++;
            updateThreatLevel('medium');
        }

        function showAPINotification() {
            const apiAlert = document.getElementById('api-alert');
            const routingNotification = document.getElementById('routing-notification');
            
            apiAlert.classList.add('active');
            routingNotification.classList.add('active');
            
            setTimeout(() => {
                apiAlert.classList.remove('active');
                routingNotification.classList.remove('active');
            }, 3000);
        }

        function updateAEGESMode(mode) {
            document.getElementById('aeges-mode').textContent = mode;
            document.getElementById('aeges-response').textContent = `🛡️ ${mode} - Economic threats neutralized`;
        }

        function deployRandomProtections() {
            const protections = aegesProtections.slice(0, 3);
            const protectionDiv = document.getElementById('protection-status');
            
            protectionDiv.innerHTML = '';
            protections.forEach(protection => {
                const protectionElement = document.createElement('div');
                protectionElement.className = 'protection-deployed';
                protectionElement.textContent = `✅ ${protection}`;
                protectionDiv.appendChild(protectionElement);
            });
        }

        function deployAEGESProtection() {
            addLogEntry('aeges', '[AEGES] Manual protection deployment initiated');
            updateAEGESMode('Enhanced Protection');
            deployRandomProtections();
        }

        function runEconomicAudit() {
            addLogEntry('aeges', '[AEGES] Economic security audit initiated');
            
            const auditTests = [
                'Asset integrity verification',
                'Transaction pattern analysis', 
                'Behavioral anomaly detection',
                'Economic threat assessment',
                'Fraud prevention calibration'
            ];
            
            auditTests.forEach((test, index) => {
                setTimeout(() => {
                    const success = Math.random() > 0.1;
                    const status = success ? 'aeges' : 'warning';
                    const result = success ? 'PASSED' : 'WARNING';
                    addLogEntry(status, `[AEGES] ${test}: ${result}`);
                }, (index + 1) * 600);
            });
        }

        function activateAssetShield() {
            addLogEntry('aeges', '[AEGES] Asset shield protocol activated');
            updateAEGESMode('Asset Shield Active');
            
            const shieldProtections = [
                'Asset Isolation Shield',
                'Transaction Firewall',
                'Value Transfer Lock'
            ];
            
            const protectionDiv = document.getElementById('protection-status');
            protectionDiv.innerHTML = '';
            
            shieldProtections.forEach(protection => {
                const protectionElement = document.createElement('div');
                protectionElement.className = 'protection-deployed';
                protectionElement.textContent = `🔒 ${protection}`;
                protectionDiv.appendChild(protectionElement);
            });
        }

        function updateProtectionStage() {
            const timePercent = (sessionTimeLeft / 300) * 100;
            let newStage = 1;
            
            if (timePercent > 75) newStage = 1;
            else if (timePercent > 50) newStage = 2;
            else if (timePercent > 25) newStage = 3;
            else newStage = 4;

            if (newStage !== currentStage) {
                document.getElementById(`stage-${currentStage}`).classList.remove('active', 'triggered');
                
                currentStage = newStage;
                const stageElement = document.getElementById(`stage-${currentStage}`);
                
                if (currentStage === 4) {
                    stageElement.classList.add('triggered');
                    addLogEntry('critical', `[FAILSAFE] Stage ${currentStage} - Emergency shutdown initiated`);
                } else {
                    stageElement.classList.add('active');
                    addLogEntry('warning', `[FAILSAFE] Stage ${currentStage} activated`);
                }
            }
        }

        function resetProtectionStages() {
            currentStage = 1;
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`stage-${i}`).classList.remove('active', 'triggered');
            }
            document.getElementById('stage-1').classList.add('active');
        }

        // Enhanced quantum key management
        function generateQuantumKey() {
            const chars = '0123456789ABCDEF';
            let key = '';
            for (let i = 0; i < 64; i++) {
                key += chars[Math.floor(Math.random() * chars.length)];
            }
            return key;
        }

        function generateNewKey() {
            const newKey = generateQuantumKey();
            document.getElementById('quantum-key').textContent = newKey;
            keyStrength = Math.min(100, keyStrength + 10);
            updateKeyStrength();
            addLogEntry('success', '[QUANTUM] New quantum key generated');
            updateQuantumStatus();
        }

        function simulateQuantumAttack() {
            keyStrength = Math.max(0, keyStrength - 25);
            updateKeyStrength();
            updateThreatLevel('medium');
            addLogEntry('warning', '[SECURITY] Quantum attack detected - key strength reduced');
            updateQuantumStatus();
        }

        function updateKeyStrength() {
            const strengthBar = document.getElementById('key-strength');
            strengthBar.style.width = keyStrength + '%';
            
            if (keyStrength > 75) {
                strengthBar.className = 'progress-fill';
            } else if (keyStrength > 25) {
                strengthBar.className = 'progress-fill warning';
            } else {
                strengthBar.className = 'progress-fill danger';
            }
            
            document.getElementById('strength-percentage').textContent = keyStrength;
        }

        function updateQuantumStatus() {
            const status = document.getElementById('quantum-status');
            if (keyStrength > 75) {
                status.className = 'status-indicator';
            } else if (keyStrength > 25) {
                status.className = 'status-indicator warning';
            } else {
                status.className = 'status-indicator danger';
            }
        }

        // Enhanced biometric consensus
        function initiateConsensus() {
            addLogEntry('success', '[BIOMETRIC] Initiating multi-party consensus...');
            
            consensusNodes.forEach((nodeId, index) => {
                setTimeout(() => {
                    const node = document.getElementById(nodeId);
                    const isValid = Math.random() > 0.2;
                    
                    if (isValid) {
                        node.classList.add('validated');
                        node.querySelector('small').textContent = 'Validated ✓';
                        addLogEntry('success', `[BIOMETRIC] ${nodeId.toUpperCase()} validation successful`);
                    } else {
                        node.style.background = '#fed7d7';
                        node.querySelector('small').textContent = 'Failed ✗';
                        addLogEntry('error', `[BIOMETRIC] ${nodeId.toUpperCase()} validation failed`);
                        updateThreatLevel('high');
                    }
                }, (index + 1) * 1000);
            });

            updateBiometricStatus();
        }

        function simulateBiometricSpoof() {
            addLogEntry('warning', '[SECURITY] Biometric spoofing attempt detected');
            addLogEntry('success', '[BIOMETRIC] Spoofing attempt blocked by quantum verification');
            updateThreatLevel('high');
            
            consensusNodes.forEach(nodeId => {
                const node = document.getElementById(nodeId);
                node.style.background = '#fbb6ce';
                node.querySelector('small').textContent = 'Secured 🔒';
            });
        }

        function updateBiometricStatus() {
            const status = document.getElementById('biometric-status');
            const validatedNodes = document.querySelectorAll('.biometric-node.validated').length;
            
            if (validatedNodes === 3) {
                status.className = 'status-indicator';
            } else if (validatedNodes > 0) {
                status.className = 'status-indicator warning';
            } else {
                status.className = 'status-indicator danger';
            }
        }

        // Enhanced timer management
        function updateTimer() {
            const minutes = Math.floor(sessionTimeLeft / 60);
            const seconds = sessionTimeLeft % 60;
            const timerDisplay = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const timerElement = document.getElementById('countdown');
            timerElement.textContent = timerDisplay;
            
            // Update progress bar
            const progressPercent = (sessionTimeLeft / 300) * 100;
            const progressBar = document.getElementById('time-remaining');
            progressBar.style.width = progressPercent + '%';
            
            // Update progress bar color based on time remaining
            if (progressPercent > 50) {
                progressBar.className = 'progress-fill';
            } else if (progressPercent > 25) {
                progressBar.className = 'progress-fill warning';
            } else {
                progressBar.className = 'progress-fill danger';
            }
            
            // Update timer status and appearance
            const status = document.getElementById('timer-status');
            if (sessionTimeLeft > 120) {
                timerElement.className = 'timer';
                status.className = 'status-indicator';
            } else if (sessionTimeLeft > 30) {
                timerElement.className = 'timer warning';
                status.className = 'status-indicator warning';
            } else if (sessionTimeLeft > 10) {
                timerElement.className = 'timer danger';
                status.className = 'status-indicator danger';
            } else {
                timerElement.className = 'timer critical';
                status.className = 'status-indicator critical';
            }
            
            // Update protection stages
            updateProtectionStage();
            
            if (sessionTimeLeft <= 0) {
                addLogEntry('critical', '[TIMEOUT] Session expired - all access revoked');
                sessionTimeLeft = 0;
                return;
            }
            
            sessionTimeLeft--;
        }

        function extendSession() {
            sessionTimeLeft = Math.min(300, sessionTimeLeft + 60);
            addLogEntry('success', '[TIMER] Session extended by 60 seconds');
            resetProtectionStages();
        }

        function forceExpiration() {
            sessionTimeLeft = 0;
            addLogEntry('critical', '[ADMIN] Session force-expired');
            currentStage = 4;
            document.getElementById('stage-4').classList.add('triggered');
        }

        // Enhanced AI resistance testing
        function simulateAIAttack() {
            aiAttackCount++;
            const attack = attackVectors[Math.floor(Math.random() * attackVectors.length)];
            document.getElementById('attack-vector').textContent = attack;
            
            addLogEntry('warning', `[AI-GUARD] ${attack} detected`);
            
            setTimeout(() => {
                addLogEntry('success', '[AI-GUARD] Attack neutralized by quantum verification');
                
                if (aiAttackCount >= 3) {
                    updateThreatLevel('high');
                    addLogEntry('warning', '[THREAT] Multiple AI attacks detected - escalating protocols');
                }
                
                updateAIStatus();
            }, 1500);
        }

        function simulateCoordinatedAttack() {
            aiAttackCount += 3;
            economicThreats += 2;
            updateThreatLevel('critical');
            
            addLogEntry('critical', '[ADVANCED-THREAT] Coordinated multi-system attack detected');
            addLogEntry('warning', '[QSAFP] Routing economic vectors to AEGES');
            addLogEntry('aeges', '[AEGES] Emergency economic protection deployed');
            
            showAPINotification();
            sessionTimeLeft = Math.min(sessionTimeLeft, 30);
            
            setTimeout(() => {
                addLogEntry('success', '[INTEGRATION] Coordinated defense successful');
                updateAEGESMode('Crisis Response');
                deployRandomProtections();
            }, 2500);
            
            updateAIStatus();
        }

        function runFullSecuritySuite() {
            addLogEntry('success', '[AUDIT] Initiating comprehensive security audit...');
            
            const tests = [
                'Quantum key integrity verification',
                'Biometric consensus validation',
                'Timer synchronization analysis',
                'AI behavior pattern analysis',
                'Economic threat assessment',
                'AEGES integration testing',
                'Cross-system coordination check'
            ];
            
            tests.forEach((test, index) => {
                setTimeout(() => {
                    const success = Math.random() > 0.1;
                    const status = success ? 'success' : 'warning';
                    const result = success ? 'PASSED' : 'WARNING';
                    const system = test.includes('Economic') || test.includes('AEGES') ? 'AEGES' : 'QSAFP';
                    addLogEntry(status, `[${system}] ${test}: ${result}`);
                }, (index + 1) * 700);
            });
        }

        function updateAIStatus() {
            const status = document.getElementById('ai-status');
            const level = document.getElementById('resistance-level');
            
            if (aiAttackCount < 3) {
                level.textContent = 'High';
                status.className = 'status-indicator';
            } else if (aiAttackCount < 6) {
                level.textContent = 'Medium';
                status.className = 'status-indicator warning';
            } else if (aiAttackCount < 10) {
                level.textContent = 'Low';
                status.className = 'status-indicator danger';
            } else {
                level.textContent = 'Critical';
                status.className = 'status-indicator critical';
            }
        }

        // Enhanced logging
        function addLogEntry(type, message) {
            const log = document.getElementById('security-log');
            const timestamp = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${timestamp}] ${message}`;
            
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
            
            if (log.children.length > 100) {
                log.removeChild(log.firstChild);
            }
        }

        // Initialize enhanced demo
        document.addEventListener('DOMContentLoaded', function() {
            generateNewKey();
            updateActiveTier();
            resetProtectionStages();
            setInterval(updateTimer, 1000);
            
            setTimeout(() => addLogEntry('success', '[DEMO] Enhanced ecosystem demonstration ready'), 1000);
            setTimeout(() => addLogEntry('success', '[INTEGRATION] QSAFP + AEGES systems synchronized'), 1500);
            setTimeout(() => addLogEntry('aeges', '[AEGES] Economic protection systems online'), 2000);
        });
    </script>
</body>
</html>
